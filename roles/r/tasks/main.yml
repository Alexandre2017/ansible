#Linux

# Ubuntu
- name: Adicionar apt key de um keyserver - Ubuntu
  apt_key:
    keyserver: keyserver.ubuntu.com
    id: E084DAB9
  when: ansible_distribution == 'Ubuntu'

- name: Adicionar repositório para r-project - Ubuntu
  apt_repository:
    repo: deb https://cloud.r-project.org/bin/linux/ubuntu trusty
    state: present
    update_cache: yes
  when: ansible_distribution == 'Ubuntu'

- name: Instalar os pacotes para o r-project - Ubuntu
  apt: name={{item}} state=latest
  with_items:
    - r-base
    - r-base-dev
    - r-cran-rjava
    - libjpeg62
  when: ansible_distribution == 'Ubuntu'

# Debian
#- name: Adicionar apt key de um keyserver - Debian
#  apt_key:
#    keyserver: keys.gnupg.net
#    id: E19F5F87128899B192B1A2C2AD5F960A256A04AF
#  when: ansible_distribution == 'Debian'
#
#- name: Adicionar repositório para r-project - Debian
#  apt_repository:
#    repo: deb https://cloud.r-project.org/bin/linux/debian stretch
#    state: present
#    update_cache: yes
#  when: ansible_distribution == 'Debian'

- name: Instalar os pacotes para o r-project - Debian
  apt: name={{item}} state=latest
  with_items:
    - r-base
    - r-base-dev
    - libopenblas-base
    - r-cran-rjava
    - libjpeg62
  when: ansible_distribution == 'Debian'

#Windows
- name: Instalar o R - Windows
  win_chocolatey:
    name: "{{item}}"
    #version: latest
  with_items:
    - r.project
    - r.studio
  when: ansible_os_family == 'Windows'

- name: Atalho para o r-project
  win_shortcut:
    description: Atalho para o r-project
    src: '%ProgramFiles%\R\R-3.5.1\bin\x64\Rgui.exe'
    dest: '%Public%\Desktop\R.lnk'
    icon: '%ProgramFiles%\R\R-3.5.1\bin\x64\Rgui.exe,0'
    args: '--cd-to-userdocs'
    state: present
  when: ansible_os_family == 'Windows'
